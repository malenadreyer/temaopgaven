---
import type { ImageMetadata } from "astro";
import { Image } from "astro:assets";

const { employee } = Astro.props;
const { img, name, title, description, slug } = employee;

const images = import.meta.glob<{ default: ImageMetadata }>(
  "/src/assets/images/*.{jpeg,jpg,png,gif}"
);
if (!images[img])
  throw new Error(
    `"${img}" does not exist in glob: "src/assets/images/*.{jpeg,jpg,png,gif}"`
  );
---
<li>
    <article>
      <figure>
        <Image
          src={images[img]()}
          alt={name}
          style=`view-transition-name: ${slug};`
        />
        <p class="title" transition:name={`title-${slug}`}>{title}</p>
      </figure>
      <div class="content">
        <h2><a href={`/employees/${slug}`}>{name}</a></h2>
        <p>{description}</p>
      </div>
    </article>
  </li>
  